<html>

<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="./raphael-2.1.4.min.js"></script>
	<script src="./justgage.js"></script>

	<script>
		var accessToken = "e9a3feae69840d67234a9ac4018ab9297d84de31";
		var deviceID = "380035000c47343438323536"

		var url = "https://api.particle.io/v1/devices/" + deviceID + "/gradosC";
		var url2 = "https://api.particle.io/v1/devices/" + deviceID + "/humedad";
		var url3 = "https://api.particle.io/v1/devices/" + deviceID + "/gradosF";

		function getReading() {
			$.get(url, { access_token: accessToken }, (data, status) => {
				if (status == "success") {
					temp = parseFloat(data.result);
					temp = temp.toFixed(2);
					g.refresh(temp);
					console.log(temp)
					setTimeout(getReading, 1000);
				}
				else {
					alert("There was a problem");
				}
			});

			$.get(url2, { access_token: accessToken }, (data, status) => {
				if (status == "success") {
					temp = parseFloat(data.result);
					temp = temp.toFixed(2);
					console.log(temp)
					h.refresh(temp);
					setTimeout(getReading, 1000);
				}
				else {
					alert("There was a problem");
				}
			});
			$.get(url3, { access_token: accessToken }, (data, status) => {
				if (status == "success") {
					temp = parseFloat(data.result);
					temp = temp.toFixed(2);
					console.log(temp)
					f.refresh(temp);
					setTimeout(getReading, 1000);
				}
				else {
					alert("There was a problem");
				}
			});

		}
	</script>
</head>

<body>
	<div style="display: flex;">
		<div id="gauge" class="200x160px"></div>
		<div id="far" class="200x160px"></div>
		<div id="humedad" class="200x160px"></div>
	</div>

	<script>
		var g = new JustGage({
			id: "gauge",
			value: 0,
			min: 0,
			max: 400,
			title: "Temperatura (C)"
		});
		var h = new JustGage({
			id: "humedad",
			value: 0,
			min: 0,
			max: 100,
			title: "Humedad (%)"
		});
		var f = new JustGage({
			id: "far",
			value: 0,
			min: 0,
			max: 400,
			title: "Farenheint (FÂ°)"
		});
		getReading();
	</script>

</body>

</html>
